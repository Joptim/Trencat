.. _real-time-train-operation:

Real-time train operation
=========================

Mainly based on [YTYXHG]_ and [WNBS]_.

At this point, the :ref:`railway-traffic-control` software has already computed a schedule for all trains in the network. This schedule is transmitted to train onboard computers through the railway communications infrastructure and all trains must attain to it as much as possible. This section introduces all the agents involved in train automation and some basic :term:`ATC` mathematical models (introduced below).

Before continuing, recall the definitions of the Grades of Automation from :ref:`introduction-att-technologies`. To make automation possible, train onboard computers and the railway communications infrastructure` integrate control systems capable of supervising, operating and controlling the entire operational progress. There are three main technologies [UITP-PK]_:

- **Automatic Train Protector** (:term:`ATP`): It is the system and all the equipment responsible for basic safety. It avoids collisions, red signal overrunning and exceeding speed limits by applying brakes automatically. It also maintains a safe distance with the train ahead. A line equipped with :term:`ATP` corresponds (at least) to a GoA1.
- **Automatic Train Operation** (:term:`ATO`): It ensures partial or complete automatic train piloting and driverless functionalities. The :term:`ATO` system performs all the functions of the driver, except for door closing. The driver only needs to close the doors, and if the way is clear, the train will automatically proceed to the next station. This corresponds to a GoA2. Many newer systems are completely computer controlled; most systems still elect to maintain a driver, or a train attendant of some kind, to mitigate risks associated with failures or emergencies. This corresponds to a GoA3. The :term:`ATO` is accomplished in two steps. First, the train computes a speed profile from the current position (typically a train station) to the next station. The speed profile must ensure that the train will arrive to the next station on time and within the speed limits. If possible, the speed profile also maximises energy efficiency (see next figure). Next, the :term:`ATO` tries to follow the given speed profile. If at some point the train is not able to follow the speed profile (for example, the :term:`ATP` stopped the train due to a red signal overrun), a new speed profile will be recomputed on the fly.

.. figure:: /_static/speed_profile_ATO.jpg
   :alt: Speed profile generated by the :term:`ATO`.
   
   Speed profile generated by the :term:`ATO` (obtainded from [YTYXHG]_\ ).

- **Automatic Train Control** (:term:`ATC`): It performs automatically normal signaller operations such as route setting and train regulation. The :term:`ATO` and the :term:`ATC` systems work together to maintain a train within a defined tolerance of its timetable. The combined system will marginally adjust operating parameters such as the ratio of power to coast when moving and station dwell time, in order to bring the train back to the timetable slot defined for it. There is no driver, and no staff assigned to accompany the train, corresponding to a GoA4. :term:`ATC` is also called *Automatic Train Supervision* (:term:`ATS`) in [YTYXHG]_.

.. figure:: /_static/GoA_UITP.png
   :alt: Summary of Grades of Automation.
   
   Relation between Grades of Automation (:term:`GoA`) and the three Automatic Train Technologies. Obtained from [UITP-PK]_.   

The next figure shows the structure of all the Automated Train Technologies and their role in driverless operation.

.. figure:: /_static/automated_train_technologies_structure.jpg
   :alt: Structure of Automated Train Technologies.
   
   Structure of the Automated Train Technologies (obtained from [WNBS]_).

.. toctree::
   :caption: Contents
   :maxdepth: 1
	
   automatic_train_control
   speed_profile_optimization
   
Previous topic: :ref:`optimal-rolling-stock-planning`.
   
Next topic: :ref:`passenger-demand-modelling`.